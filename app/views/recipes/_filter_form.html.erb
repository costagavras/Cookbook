<div class="filter_section">

  <%= form_tag(recipes_path, method: "get", class: "filter_form") do |f| %>

    <fieldset><legend><%= t("recipe.prep_time") %></legend>
      <%= label_tag(:prep_time_shorter_than, "shorter than") %>
      <%= number_field_tag(:prep_time_shorter_than, params[:prep_time_shorter_than], in: 0..1000, class: "filter_number_field") %>
      <%= label_tag(:prep_time_equal_to, "equal to") %>
      <%= number_field_tag(:prep_time_equal_to, params[:prep_time_equal_to], in: 0..1000, class: "filter_number_field") %>
      <%= label_tag(:prep_time_longer_than, "longer than") %>
      <%= number_field_tag(:prep_time_longer_than, params[:prep_time_longer_than], in: 0..1000, class: "filter_number_field") %>
    </fieldset>

    <div class="filter_condition">
      <%= radio_button_tag(:condition, "and") %>
      <%= label_tag(:condition, "and") %>
       &nbsp; | &nbsp;
      <%= label_tag(:condition, "or") %>
      <%= radio_button_tag(:condition, "or") %>
    </div>

    <fieldset><legend><%= t("recipe.difficulty") %></legend>
      <%= label_tag(:difficulty_less_than, "less than") %>
      <%= number_field_tag(:difficulty_less_than, params[:difficulty_less_than], in: 1..3, class: "filter_number_field") %>
      <%= label_tag(:difficulty_equal_to, "equal to") %>
      <%= number_field_tag(:difficulty_equal_to, params[:difficulty_equal_to], in: 1..3, class: "filter_number_field") %>
      <%= label_tag(:difficulty_more_than, "more than") %>
      <%= number_field_tag(:difficulty_more_than, params[:difficulty_more_than], in: 1..3, class: "filter_number_field") %>
    </fieldset>

    <%= submit_tag("Filter", name: nil, class: "filter_button", id: "filter_button", onclick: "return_to_filter();") %>
    <%= button_tag("Reset", name: nil, class: "reset_button", onclick: "reset_filter();") %>
  <% end %>

  <%if @filtered_result == true %>
    <h2 class="filter"><%=@filter_result_message%></h2>
    <div class="block">
      <% @filtered_categories.each do |category|%>
        <div class="categories_recipes">
          <h2><span><%= link_to(category.name, category_path(category), :class => "category_names")%></span></h2>
          <% category.recipes.most_viewed.each do |recipe|%>
            <%if @filtered_recipes.include?(recipe)%>
              <div class = "index_recipe">
                <h3><%=link_to(recipe.name, recipe_path(recipe))%></h3>
                <h3><%= t("recipe.prep_time")%>: &nbsp;&nbsp;<span><%=recipe.prep_time%> <%= t("recipe.min")%></h3>
                <h3><%= t("recipe.servings")%>: &nbsp;&nbsp;<span><%=recipe.servings%></span></h3>
                <h3><%= t("recipe.difficulty")%>: &nbsp;&nbsp;
                <span><%recipe.complexity.times do %>
                          <%= image_tag 'cookbook_no_bg.png', :class => "logo_img_diff", :width => "30", :length => "30" %>
                      <%end%>
                </span>
                </h3>
              </div>
            <%end%>
          <%end%>
        </div>
      <%end%>
    </div>
  <%else%>
    <h2 class="filter"><%=@filter_result_message%></h2>
  <%end%>

</div>
